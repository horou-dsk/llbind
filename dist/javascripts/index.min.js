"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){var o={};for(var i in t)if(e(t[i])){o[i]=[];for(var r in t[i])o[i].push(t[i][r])}else t.hasOwnProperty(i)&&(o[i]="object"==_typeof(t[i])?n(t[i]):t[i]);return o}function o(t,e,o,i){i&&(t=n(t)),o=o||this;for(var r in t)if(!t.hasOwnProperty(r)||0==e.call(o,t[r],r))return!1;return!0}function i(t,e){var n="";return n=" "+(t||"")+": ",e&&(n+=e+" "),window.document.createComment(n)}function r(t,e){t.parentNode&&t.parentNode.insertBefore(e,t)}function s(t,e){S.push({last:t.obj[t.key],get:function(){return t.obj[t.key]},exp:function(){return this.get()===this.last},set:e,setLast:function(){var t=S[this.index+1];if(t.get()==this.last)return t.last=this.last,t.setLast()},index:S.length})}function c(){var t=b.$scope;do{o(t.$$watchers,function(t){t.exp()||t.set(t.get())});var e=t.$childHeadScope,n=t.$nextScope;if(e)t=e;else if(n)t=n;else{for(;!n&&t!==b.$scope;)t=t.$parentScope,n=t.$nextScope;t=n}}while(t)}function l(t){var e=t.childNodes,n=(b.$scope.$$watchers,void 0),i=/(?={{).+}}/;o(e,function(t){switch(t.nodeType){case v:n=t.textContent,i.test(n)&&(t.textContent=a(n,t));break;case $:u(t)||l(t);break;default:l(t)}})}function a(t,e,n){var i=t.match(/(?={{)(.+?)}}/g),r=void 0,c=void 0,l=t,u=void 0;return o(i,function(o){r=o.match(/[^{^}]+/)[0],c=h(r)||"",u=d(r),e&&s(d(r),function(t){var o=a(l);switch(e.nodeType){case v:e.textContent=o;break;case $:e.setAttribute(n,o)}this.last=t,this.setLast()}),t=t.replace(o,c)}),t}function u(t){var e=void 0,n=void 0,i=void 0,r=/(?={{).+}}/;return o(t.attributes,function(o){e=o.name,i=o.value,r.test(i)&&(n=a(i,t,e),t.setAttribute(e,n))}),!1}function f(){o(document.querySelectorAll("[ll-For]"),function(t){var e=t.getAttribute("ll-for"),n=e.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+of\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),o=t.cloneNode(!0),s={fhs:n[0],lhs:n[1],rhs:n[2],askey:n[3],fordom:o},c=i("llFor",s.fhs);r(t,c),y[c.textContent]=s,t.remove()})}function p(){o(y,function(t){t.lhs;s(d(t.rhs),function(t){console.log(t)})})}function h(t,e){if("string"!=typeof t)return null;var n=t.split("."),i=/([^\[]+)\[(\d)\]/,r=e||b.$scope;return o(n,function(t,e){var n=t.match(i);if(void 0===(r=n?r[n[1]][n[2]]:r[t])||null===r)return null}),r||""}function d(t,e){if("string"!=typeof t)return null;var n=t.split("."),i=null,r=/([^\[]+)\[(\d)\]/,s=n.length,c=e||b.$scope;return o(n,function(t,e){var n=t.match(r);if(n){if(e==s-1)return i={obj:c[n[1]],key:n[2]},!1;c=c[n[1]][n[2]]}else{if(e==s-1)return i={obj:c,key:t},!1;c=c[t]}}),i}var v=3,$=1,y={},b={$bind:function(){this.$llFor(),this.$llmodel(),this.$event()},$event:function(){var t=this;o(document.querySelectorAll("[llevent]"),function(n){o(n.getAttribute("llevent").split("&"),function(i){var r=i.split(":")[0].split("~"),s=i.split(":")[1],l=s.match(/([\w\d]+)\(/)[1],a=s.match(/\(([^\)]+)\)/);a&&(a=a[1].split(",")),n.removeAttribute("llevent"),o(r,function(i){n.addEventListener(i,function(n){var i=void 0;i=e(a)?a.slice(0):[],o(i,function(t,e){var o=i[e];if("$event"===o)return i[e]=n,!0;if(!isNaN(parseInt(o)))return i[e]=parseInt(o),!0;if(/^['"]/.test(o))i[e]=o.replace(/^['"]/,"").replace(/['"]$/,"");else{var r=h(o);r&&(i[e]=r)}});var r=t.$scope[l].apply(this,i);return c(),r})})})})},$llmodel:function(){var t=document.querySelectorAll("[llmodel]");this.$elems.inps,this.$scope.$$watchers;o(t,function(t){var e=t.getAttribute("llmodel"),n=d(e);t.value=n.obj[n.key],s(n,function(e){this.last=e,t.value!=e&&(t.value=e)}),t.addEventListener("input",function(){n.obj[n.key]=this.value,c()})})},$llFor:function(t){},$scope:function(){var t=function(){this.$$watchers=[],this.$apply=c,this.$index=0,this.$parentScope=this.$childHeadScope=this.$childLastScope=this.$nextScope=this.$prevScope=null};return t.prototype={addChildScope:function(t){if(this.$childHeadScope){var e=this.$childLastScope;e.$nextScope=t,t.$prevScope=e,this.$childLastScope=t}else this.$childHeadScope=t,this.$childLastScope=t;t.$parentScope=this}},new t}(),$elems:{texts:[],inps:[],attrs:[]}},S=b.$scope.$$watchers;b.$scope;t.bootEach=function(t){f(),b.$bind(),l(t),p(),c()},window.addEventListener("load",function(){bootEach(document.querySelector("[ll-app]"))}),t.llbind=b,t.eachTexts=c}(window);